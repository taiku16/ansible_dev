#!/bin/bash
# THIS FILE IS MANAGED BY PUPPET, ANY LOCAL CHANGES WILL BE DESTROYED

# Force a sync with our RHN Satellite server so it doesn't report stale
# information.

warning() {
    logger -p user.warn -t "satellite-sync" -- "$@" || true

    if ! tty -s ; then
        exec 2>/dev/null
    fi
    echo "[warning]" "$@" >&2
}

if [ -x /usr/sbin/rhn-profile-sync ] ; then
    warning "Running rhn-profile-sync on boot"
    /usr/sbin/rhn-profile-sync >/dev/null
fi

exit 0
